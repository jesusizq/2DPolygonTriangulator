{
    # Deactivate automatic SSL since we are behind a proxy with SSL (Cloudflare + Host Nginx)
    auto_https off
}

http://{$DOMAIN} {
    # Proxy to the frontend Nginx
    reverse_proxy frontend:80

    # Security headers
    header {
        Strict-Transport-Security "max-age=31536000;"
        X-XSS-Protection "1; mode=block"
        X-Frame-Options "SAMEORIGIN"
        Access-Control-Allow-Origin "*"
    }

    log {
        output file /var/log/caddy/access.log
    }
}
